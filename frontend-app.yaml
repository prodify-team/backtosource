runtime: python39
service: default

# Static file serving for frontend
handlers:
  # Serve main chatbot application
  - url: /
    static_files: simple-chatbot.html
    upload: simple-chatbot.html
    secure: always

  - url: /simple-chatbot.html
    static_files: simple-chatbot.html
    upload: simple-chatbot.html
    secure: always

  # Serve admin panel
  - url: /admin
    static_files: admin-panel.html
    upload: admin-panel.html
    secure: always

  - url: /admin-panel.html
    static_files: admin-panel.html
    upload: admin-panel.html
    secure: always

  # Serve debug tools (remove in production)
  - url: /debug-tasks.html
    static_files: debug-tasks.html
    upload: debug-tasks.html
    secure: always

  - url: /test-simple.html
    static_files: test-simple.html
    upload: test-simple.html
    secure: always

  # Serve static assets
  - url: /frontend/public/(.*)
    static_files: frontend/public/\1
    upload: frontend/public/.*
    secure: always

  # API routes - proxy to backend service
  - url: /api/.*
    script: auto
    secure: always

# Redirect HTTP to HTTPS
automatic_scaling:
  min_instances: 0
  max_instances: 5

# Simple Python app for routing
skip_files:
  - ^(.*/)?#.*#$
  - ^(.*/)?.*~$
  - ^(.*/)?.*\.py[co]$
  - ^(.*/)?.*/RCS/.*$
  - ^(.*/)?\..*$
  - ^(.*/)?node_modules/.*$